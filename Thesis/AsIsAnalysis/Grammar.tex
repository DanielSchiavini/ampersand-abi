% !TEX root = ../Thesis.tex

\subsection{Grammar}
\label{analysis:grammar}

\subsubsection{Getting the EBNF in good shape}
\dict{EBNF}{Extended Backus-Naur Form}%
\dict{Extended Backus-Naur Form}{Notation technique for documenting context-free grammars}%
The Ampersand grammar is described using EBNF notation. 
EBNF is a notation technique with the goal to express a context free grammar like ADL's.
The existing EBNF was outdated and not in line anymore with the actual syntax of Ampersand.
As the EBNF is the crucial source of information in building the new parser, the first focus was to update the old EBNF to represent the actual Ampersand Syntax.

Through reverse engineering, we checked all Haskell functions on the actual syntax they implement.
In the source of the new parser, all the grammar expressions are placed above the actual parser function as code annotations to support code maintainability.

\subsubsection{The actual EBNF diagram}
The derived syntax is up to date and visualized using a railroad diagram, an ideal technique to create a visual representation of context free grammars.
Several railroad diagram generators are available on the internet, free of charge.
We used the railroad diagram generator created by Gunter Rademacher, available on \code{\url{http://bottlecaps.de/rr/ui}}.
The generated diagrams with the corresponding EBNF productions are available in the \hyperref[app:docs]{project documentation (appendix)}.

One interesting outcome is that during the project we found a bug in the Railroad Diagram Generator.
The tool would crash with the \code{Trm4} expressions.
This bug was reported to the author Gunther Rademacher, who promptly fixed the issue.
