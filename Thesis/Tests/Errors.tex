% !TEX root = ../Thesis.tex

\subsection{Error messages}
\label{tests:errors}
The proof of the pudding is in the eating, and therefore, our error message qualification definition from \autoref{analysis:errors} is applied to the new parser.
All erroneous syntax statements recorded during the analysis phase are fed to the new parser to draw up the error message quality overview of the new parser.

The results are placed in \autoref{tab:error-messages-results} next to the results of the old parser as a reference point.
The actual error list, containing the syntax statements with the corresponding error messages, is available in the \hyperref[app:docs]{project documentation (appendix)}.

\begin{table}[h]
  \centering\small
	\begin{tabular}{|l|lr|lr|}\hline
		\rowcolor[HTML]{DDDDDD}
    \textbf{Error quality}  & \multicolumn{2}{|c|}{\textbf{Old parser}} & \multicolumn{2}{|c|}{\textbf{New parser}} \\\hline\hline
		Good           & 19          & 22,35\%          & 70          & 82,35\%          \\\hline
		Acceptable        & 48          & 56,47\%          & 14          & 16,47\%          \\\hline
		Bad            & 18          & 21,18\%          & 1           &  1,18\%          \\\hline
		\rowcolor[HTML]{DDDDDD}\hline\hline
		\textbf{Total} & \textbf{85} & \textbf{100\%} & \textbf{85} & \textbf{100\%} \\\hline
	\end{tabular}
  \caption{Error message comparison results}
  \label{tab:error-messages-results}
\end{table}

The table clearly visualizes that there indeed was an issue with the error messages generated by the old Ampersand parser.
By implementing the new parser, a substantial improvement is made towards the creation of good error messages in which 82\% of the generated error messages are good, compared to 22\% in the old parser.

One bad error message remains in the system.
After analysis, the resolution of this remaining bad error would require too much effort, hence increased complexity, compared to the actual value gain.
The error in question is given when the \code{Meta} statement is used with only one string value. 
Given the simple structure of the notation, we assume that the reference to the line number of the \code{Meta} is sufficient although the error message is unclear.
Therefore, this message is kept as is.

%todo: voorbeeld van een foutmelding

General remarks and highlights:
 \begin{itemize}
	\item 	If the error qualification was defined in a less strict way, the numbers would be slightly different as some bad errors would be judged as being acceptable. 
		In the comparison between the old and new parser, the exact same qualification method is used while the syntax issue was, as well, identical.
		Due to this approach, we can conclude that the achieved results are justified.
	\item 	Error positioning was already correct in the old Ampersand parser; this is maintained in the new parser.
	\item 	The principle of Parsec to end parsing after the first error is found to have a massive improvement on the bad error messages due the conciseness issues.
		Nearly 50\% of the acceptable and bad messages changed to good error messages just due to this principle.
	\item 	Some error messages were extremely elaborated due to which the standard Windows command prompt was unable to fully show the error message.
\end {itemize}

To provide a better insight in the full list of the old and new error messages, together with the error qualification is provided in the \hyperref[app:docs]{project documentation (appendix)}.

Based on the defined error qualification method, we can clearly conclude that the implementation of the new Ampersand parser has a very positive effect on the error messages quality.
The percentage of good errors is now on an acceptable level and the remaining errors are, except for one, of acceptable quality, while still giving valuable information that can be used for error resolution.

To avoid the risk of additional complexity in the parser code, thus decreasing the code maintainability, we judged that this result is the best compromise between error message quality and maintainability.
